var draw=function(){var t=document.querySelector("main").offsetWidth,e=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),o=n.getContext("2d"),a=n.getBoundingClientRect(),i=0,r=0;x1=0,y1=0,x2=0,y2=0,lx=!1,ly=!1,isDrawing=!1,penWidth=3,mouseDown=!1,colorSw=!0,shape="";var s=[],l=0;return{setStart:function(){x1=i,y1=r},setEnd:function(){x2=i,y2=r},setPoint:function(){s[l]=[],s[l].x=i,s[l].y=r,s.length>2?(this.draw(),l=0,s=[]):l++},setXY:function(t){lx=i,ly=r,i=t.clientX-a.left-n.offsetLeft,r=t.clientY-a.top-n.offsetTop},writeXY:function(){$("#trackX").text("X: "+i),$("#trackY").text("Y: "+r)},getCanvas:function(){return n},setShape:function(t){shape=t},getShape:function(){return shape},setColorSw:function(t){colorSw=t},getColorSw:function(){return colorSw},draw:function(){o.restore(),o.lineWidth=penWidth,"rectangle"===shape?this.drawRect():"line"===shape?this.drawLine():"triangle"===shape?this.drawTriangle():"3-point"===shape?this.draw3Point():"isos"===shape?this.drawIsos():"circle"===shape?this.drawCircle():"path"===shape?this.drawPath():alert("Please choose a shape"),o.save()},setColor:function(){!0===this.getColorSw()?(o.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),o.fillStyle=o.strokeStyle):(o.strokeStyle=document.getElementById("shapeColor").value,o.fillStyle=document.getElementById("shapeColor").value)},drawCircle:function(){this.setColor();let t=x1-x2,e=y1-y2,n=Math.sqrt(t*t+e*e);o.beginPath(),o.arc(x1,y1,n,0,2*Math.PI),o.stroke(),o.fill()},drawLine:function(){this.setColor(),o.beginPath(),o.moveTo(x1,y1),o.lineTo(x2,y2),o.stroke()},drawRect:function(){this.setColor(),o.fillRect(x1,y1,x2-x1,y2-y1)},getCanvas:function(){return n},drawTriangle:function(){this.setColor(),o.beginPath(),o.moveTo(x1,y1),o.lineTo(x2,y2),o.lineTo(x1,y2),o.fill()},draw3Point:function(){this.setColor(),o.beginPath(),o.moveTo(s[0].x,s[0].y),o.lineTo(s[1].x,s[1].y),o.lineTo(s[2].x,s[2].y),o.lineTo(s[0].x,s[0].y),o.fill()},drawIsos:function(){this.setColor(),o.strokeStyle=document.getElementById("shapeColor").value,o.fillStyle=document.getElementById("shapeColor").value,o.beginPath(),x2>x1?(o.moveTo(x1,y1),o.lineTo(x2,y2),o.lineTo(x2+Math.abs(x2-x1),y1)):(o.moveTo(x1,y1),o.lineTo(x2,y2),o.lineTo(x2,y2+2*Math.abs(y1-y2))),o.fill()},drawPath:function(){this.setColor(),!0===mouseDown&&(o.beginPath(),o.moveTo(lx,ly),o.lineTo(i,r),o.stroke())},init:function(){n.width=t,n.height=e,document.querySelector("main").appendChild(n),$("#trackX").text("X: "),$("#trackY").text("Y: "),$("#selShape").text("No Shape Selected"),mouseDown=!1},resetCanvas:function(){1==confirm("Do You really want to clear Your canvas?")&&(lx=0,ly=0,i=0,r=0,mouseDown=!1,o.clearRect(0,0,n.width,n.height))},lineWidth:function(){var t=prompt("Enter a number from 1 to 30\nto set the width of the line ");t>=1&&t<=30&&(penWidth=t,$("#btnLineWidth").text("Width = "+penWidth))},setIsDrawing:function(t){isDrawing=t},getIsDrawing:function(){return isDrawing},setMouseDown:function(t){mouseDown=t}}}();draw.init(),$(draw.getCanvas()).mousemove(function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&draw.draw()}),$(draw.getCanvas()).mousedown(function(t){"3-point"!==draw.getShape()&&(draw.setStart(),draw.setIsDrawing(!0))}),$(draw.getCanvas()).mouseup(function(){"3-point"!==draw.getShape()&&(draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)),"3-point"===draw.getShape()&&draw.setPoint()}),$(draw.getCanvas()).mousedown(function(){draw.setMouseDown(!0),draw.setStart()}),$(draw.getCanvas()).mouseup(function(){draw.setMouseDown(!1),draw.setEnd(),draw.draw()}),$(draw.getCanvas()).mousemove(function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()}),$(function(){$("#btnRect").on("click",function(){$("#selShape").text("RECTANGLE"),draw.setShape("rectangle")})}),$(function(){$("#btnLine").on("click",function(){$("#selShape").text("LINE"),draw.setShape("line")})}),$(function(){$("#btn3Point").on("click",function(){$("#selShape").text("3-point"),draw.setShape("3-point")})}),$(function(){$("#btnCircle").on("click",function(){$("#selShape").text("CIRCLE"),draw.setShape("circle")})}),$(function(){$("#btnTriangle").on("click",function(){$("#selShape").text("TRIANGLE"),draw.setShape("triangle")})}),$(function(){$("#btnIsos").on("click",function(){$("#selShape").text("ISOSCELES TRIANGLE"),draw.setShape("isos")})}),$(function(){$("#btnResetCanvas").on("click",function(){draw.resetCanvas()})}),$(function(){$("#btnLineWidth").on("click",function(){draw.lineWidth()})}),$(function(){$("#btnPath").on("click",function(){$("#selShape").text("PATH"),draw.setShape("path")})}),$(function(){$("#btnRandomColor").on("click",function(){draw.setColorSw(!0)})}),$(function(){$("#btnSelColor").on("click",function(){draw.setColorSw(!1)})});